<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Devsmeetup</title>

		<link rel="icon" href="img/favicon.ico">
        <link rel="manifest" href="manifest.json">

		<link rel="stylesheet" href="css/reveal.css">
		<!-- TODO: blood oder moon? -->
		<link rel="stylesheet" href="css/theme/blood.css">

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<link rel="stylesheet" href="custom.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>

	<!-- TODO: Idee: Wie wäre es wenn wir die Präsentation einfach Progressive machen. Sollte easy sein mit splashscree
	 und service worker für offline. Dann können die leute vielleicht interaktiv es auf ihrem smartphone mal testen -->
	<body>
		<div class="reveal">
			<div class="slides">
				
				<section id="slide1">
					<h2>Introduction to <br/>Progressive Web Apps</h2>
					<div class="splitview">
						<!-- TODO: music einbauen: https://soundcloud.com/terramonk/pwa-amsterdam-2016 ? -->
						<!-- TODO: add names and company and twitter -->
						<!-- TODO: companay websites? Stellenagebote link am ende der Präs :) ?-->
						<div>
							<p>Julien Thoma, Reservix GmbH</p>
							<p><i class="fa fa-twitter"></i>@julien_thoma</p>
							<p><i class="fa fa-github"></i>@julienthoma</p>
						</div>
						<img src="http://devsmeetup.de/assets/img/julienanton.png">
						<div>
							<p>Anton Stepan, Patronas GmbH</p>
							<p><i class="fa fa-twitter"></i>@asndev</p>
							<p><i class="fa fa-github"></i>@asndev</p>
						</div>

					</div>
				</section>

				<section>
					<section>
						<h1>Motivation</h1>
					</section>
					<section>
						<h2>Mobile is: responsive</h2>
						<h2>vs</h2>
						<h2>Native is: Fast, Better UX, Offline access</h2>
					</section>
					<section>
						<h2>App Abandonment</h2>
						<h1 class="fragment">23%</h1>
						<!-- http://info.localytics.com/blog/23-of-users-abandon-an-app-after-one-use -->
					</section>
					<section>
						<h2>80% of app usage is done</h2>
						<h1 class="fragment">on three apps</h1>
					</section>
					<section data-background-image="https://media.giphy.com/media/tdoUaMmgtgSqc/giphy.gif">
						<h2>Distributing native software <br/>is <u>hard</u>.</h2>
					</section>
					<section data-background-image="https://media.giphy.com/media/xTiTnwLNe6sSsySBNu/giphy.gif">
						<h2>App Store discoverability?</h2>
						<h1 class="fragment">lol</h1>
					</section>
					<section data-background-image="https://media.giphy.com/media/NjRp55nfUo7MA/giphy.gif">
						<h2>Time on mobile device</h2>
						<h3>13% Mobile Web</h3>
						<h3>87% Apps</h3>
					</section>
				</section>

				<section>
					<h2>What's missing?</h2>
					<ul>
						<li class="fragment"><strong>Reliable performance</strong>
							<ul>
								<li>fast loading</li>
								<li>working offline</li>
								<li>Lie-fi</li>
							</ul>
						</li>
						<li class="fragment">
							<strong>Fast</strong>
							<ul>
								<li>smooth UI & animations</li>
								<li>jank-free scrolling</li>
								<li>seamless navigation</li>
							</ul>
						</li>
						<li class="fragment">
							<strong>Engaging</strong>
							<ul>
								<li>Home Screen</li>
								<li>Push Notifications</li>
							</ul>
						</li>
					</ul>
				</section>

				<section>
					<h2>The Web is:</h2>
					<h4 class="fragment">Easily sharable (url + seo optimized)</h4>
					<h4 class="fragment">Not owned by any one company</h4>
					<h4 class="fragment">Billions of users</h4>
					<h2 class="fragment">But:</h2>
					<h4 class="fragment">No Offline Support</h4>
					<h4 class="fragment">No Homescreen App</h4>
					<h4 class="fragment">Can be slow and janky</h4>
				</section>

				<section data-background-image="https://media.giphy.com/media/1Moe2Us9pVV60/giphy.gif">
					<h1>Progressive<br/>Web<br/>Apps</h1>
				</section>

				<section>
					<h2>Progressive Web Apps?</h2>
					<h5 class="fragment">→ Nothing new, just bringing everything together</h5>
					<br/>
					<ul class="omg-list">
						<li class="fragment">Responsive</li>
						<li class="fragment">Secure <i>(https)</i></li>
						<li class="fragment">Fast <i>(smooth animations/scrolling, RAIL, http2)</i></li>
						<li class="fragment">Instant Loading & Offline available <i>(sw)</i></li>
						<li class="fragment">Home Screen <i>(manifest.json)</i></li>
						<li class="fragment">Push Notifications <i>(sw push manager)</i></li>
					</ul>
				</section>

				<section>
					<h2>Examples</h2>
						<p><a target="_blank" href="https://www.pokedex.org/">Pokedex</a>
						<p><a target="_blank" href="https://airhorner.com/">Airhorner</a>
						<p><a target="_blank" href="https://pwa.rocks/">PWA.rocks</a>
						<p>Air Berlin Mobile Site</p>
				</section>
				<section>
						<img style="height: 25%; width: 25%;" src="https://www.airberlin.com/site/affiliate/offers/PWA/3_boarding_pass_DE.png" />
				</section>

				<section>
					<h2>Making an existing app progressive</h2>
					<ul>
						<li class="fragment">manifest.json</li>
						<li class="fragment">Application Shell Model</li>
						<li class="fragment">Service Workers</li>
					</ul>
				</section>

                <section>
                    <h2>Existing App</h2>
                    <h5>Overheroes</h5>
                    <aside class="notes">
                        Overheroes basic version zeigen. Vielleicht ganz kurz den Code zeigen.
                    </aside>
                </section>

				<section>
					<h3>manifest.json</h3>

					<pre>
                        <code data-trim data-noescape style="line-height: 30px; max-height: 600px">
{
    "name": "Overheroes",
    "short_name": "heroes",
    "gcm_sender_id": "719284092984",
    "icons": [{
        "src": "icon-192x192.png",
        "sizes": "192x192",
        "type": "image/png"
    }, {
        "src": "icon-256x256.png",
        "sizes": "256x256",
        "type": "image/png"
    }],
    "start_url": "/index.html",
    "display": "standalone",
    "background_color": "#3E4EB8",
    "theme_color": "#2F3BA2",
    ​​"orientation": "portrait-primary"
}

                        </code>
                    </pre>
				</section>

				<section>
					<img src="img/homescreen.png" style="width: 380px">
				</section>

				<section>
					<img src="img/splash.png" style="width: 380px">
				</section>

				<section>
					<img src="img/appexample.png" style="width: 380px">
				</section>

				<section>
					<img src="img/singleapp.png" style="width: 380px">
				</section>

				<section>
					<h2>Application Shell Model</h2>
					<ul>
						<li class="fragment">minimal HTML, CSS, and JavaScript powering a user interface</li>
					</ul>
				</section>

				<section style="position: relative">
					<img src="img/appshell-1.jpg" style="width: 55%">
				</section>

				<section>
					<h2>Service Workers</h2>
					<ul>
						<li class="fragment">script that runs in your browser</li>
						<li class="fragment">has no DOM access</li>
						<li class="fragment">not blocking the main thread</li>
						<li class="fragment">ability to intercept and handle network requests</li>
						<li class="fragment">offline capabilities</li>
						<li class="fragment">push notifications</li>
					</ul>
				</section>

				<section>
					<img src="img/sw_model.png" style="width: 60%"/>
				</section>

				<section>
					<h2>Events</h2>
					<ul>
						<li>install</li>
						<li>fetch</li>
						<li>activate</li>
					</ul>
				</section>

				<section>
					<h4>register service worker</h4>
<pre>
<code>
// index.html
    if('serviceWorker' in navigator) {
        navigator.serviceWorker
            .register('/sw.js')
            .then(function() { console.log("SW Registered"); });
    }
</code>
</pre>

				</section>

				<section>
					<h4>install</h4>

<pre>
<code>
self.addEventListener('install', function(e) {
    e.waitUntil(
        caches.open('overheroes').then(function(cache) {
            return cache.addAll([
                '/',
                '/index.html',
                '/heroes',
                '/css/overheroes.css',
                '/js/overheroes.js'
            ]);
        })
    );
});
</code>
</pre>
				</section>

                <section>
                    <h4>activate</h4>
<pre>
<code>
self.addEventListener('activate', event => {
    // …delete old caches…
});
</code>
</pre>
                </section>

                <section>
                    <h4>fetch</h4>
<pre>
<code>
self.addEventListener('fetch', event => {
    event.respondWith(
        caches.match(event.request)
            .then(response => response || fetch(event.request))
    );
});
</code>
</pre>
                </section>

                <section>
                    <h2>Making Overheroes progressive</h2>
                    <aside class="notes">
                        Overheroes step by step.
                    </aside>
                </section>

				<section>
					<h2>Push Notifications</h2>
					<section>
						<div class="splitview">
						<ul style="padding-top:140px;">
							<li><strong>Push</strong>: action from server to serviceworker</li>
							<li><strong>Messaging Server</strong>: eg <a href="https://firebase.google.com/docs/cloud-messaging/">Firebase Cloud Messaging</a></li>
							<li><a href="https://github.com/chrisdavidmills/push-api-demo/blob/gh-pages/server.js">node-js-demo-server</a></li>
							<li><strong>Notification</strong>: serviceWorker.showNotification(title, options)</li>
						</ul>
						<img src="https://mobiforge.com/files/push-notifications-2.png">
					</section>

					<section>
						<h5>Sending/Receiving Messags</h5>
						<ul>
							<li><strong>Configuration</strong>
								<ol>
									<li class="fragment">register a project at a messaging server (project id, api key)</li>
									<li class="fragment">set <code>gcm_sender_id</code> in <code>manifest.json</code></li>
									<li class="fragment">add event listener for 'push' in service worker</li>
									<li class="fragment">send message</li>
								</ol>
							</li>
						</ul>
					</section>

					<section>
						<h5>Event Listener for Push</h5>
						<pre>
							<code>
	// sw.js
	self.addEventListener('push', function(event) {
	  const title = 'Push message';
	  const body = event.data.text();

	  event.waitUntil(
	    self.registration.showNotification(title, {
	      body: body,
	      icon: 'images/icon-192x192.png',
	      badge: 'images/logo-72x72.png'
	   }));
	});
							</code>
						</pre>
					</section>

					<section>
						<h2><a target="_blank" href="https://gauntface.github.io/simple-push-demo/">Push Demo</a></h2>
					</section>

				</section>

				<section>
					<h2>Browser Support?</h2>
					<a target="_blank" href="http://caniuse.com/#feat=serviceworkers">Can I use?</a><br/>
					<a target="_blank" href="https://jakearchibald.github.io/isserviceworkerready/index.html">Serviceworker Ready?</a>
				</section>

                <section>
                    <h2>Contra</h2>
                    <ul>
                        <li class="fragment">cache not reliable</li>
                        <li class="fragment">browser may clear the cache</li>
                        <li class="fragment">not working for ios right now</li>
                    </ul>
                </section>

				<section>
					<h3>Tooling</h3>
					<h4 style="text-align:left">Starter Kit</h4>
					<a href="https://developers.google.com/web/tools/starter-kit/">https://developers.google.com/web/tools/starter-kit/</a>
					<a href="https://developers.google.com/web/tools/polymer-starter-kit/">https://developers.google.com/web/tools/polymer-starter-kit/</a>
					<a href="https://github.com/jeffposnick/create-react-pwa">https://github.com/jeffposnick/create-react-pwa</a>
					<a href="https://github.com/AngularClass/angular2-webpack-starter">https://github.com/AngularClass/angular2-webpack-starter</a>
					<p>
					<h4 style="text-align:left">Service Worker</h4>
					<a href="https://developers.google.com/web/tools/service-worker-libraries/">https://developers.google.com/web/tools/service-worker-libraries/</a>
				</section>

				<section>
					<h3>Tooling</h3>
					<h4 style="text-align:left">Lighthouse</h4>
					<a href="https://github.com/GoogleChrome/lighthouse">https://github.com/GoogleChrome/lighthouse</a>
					<p>
					<h4 style="text-align:left">Manifest.json</h4>
					<a href="https://brucelawson.github.io/manifest/">https://brucelawson.github.io/manifest/</a>
					<a href="https://github.com/patrickkettner/manifestation">https://github.com/patrickkettner/manifestation</a>
				</section>

				<section>
					<h1>Cheers</h1>
				</section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,
				width: 1500,

    			transition: 'convex',

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>

        <script>
            if('serviceWorker' in navigator) {
                navigator.serviceWorker
                        .register('/sw.js')
                        .then(function() { console.log("SW Registered"); });
            }
        </script>
	</body>
</html>
